<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/component---src-templates-blog-post-js.2347c38af682bed3706c.css">.Header-module--header--2gV_n{height:4rem;display:flex;align-items:center;justify-content:center}.Header-module--menu--2Suuy{height:4rem;font-size:.875rem;display:flex;flex:1 1;align-items:center;justify-content:flex-end}.Header-module--menu--2Suuy .Header-module--menu-item--1Qfhj{color:#5badf0;margin:0 .5rem;justify-content:flex-end;padding-bottom:.25rem}.Header-module--menu--2Suuy .Header-module--menu-item--1Qfhj:hover{box-shadow:0 1.5px 0 0 currentColor}.Header-module--title--3JWMg{margin:0}.Footer-module--footer--VUGIP{height:3rem;font-size:.75rem;display:flex;align-items:center;justify-content:center;color:#9b9b9b}.Layout-module--page-wrapper--2LN4h{min-height:100vh;margin:0 auto;max-width:90%}@media (min-width:845.9px){.Layout-module--page-wrapper--2LN4h{max-width:769px}}.Layout-module--content-container--2LGnA{margin:0 auto;max-width:960px;min-height:calc(100vh - 7rem);display:flex;flex-direction:column;justify-content:center}.blog-post-module--title--17231{margin:0}.blog-post-module--date--_pArM{color:#9b9b9b;font-style:italic;font-size:.875rem;margin:.25rem 0}.blog-post-module--content--2dQ8S{margin:1.5rem 0;line-height:1.8}.blog-post-module--content--2dQ8S pre{padding:1rem}.blog-post-module--content--2dQ8S pre code:after{display:none}.blog-post-module--content--2dQ8S blockquote{font-size:.875rem;font-style:italic;background:#f9f9f9;border-left:6px solid #ccc;margin:1.5rem;padding:1rem;quotes:"\201C" "\201D" "\2018" "\2019"}.blog-post-module--content--2dQ8S blockquote:before{color:#ccc;content:open-quote;font-size:4em;line-height:.1em;margin-right:.25rem;vertical-align:-.4em}.blog-post-module--content--2dQ8S blockquote p{display:inline}</style><style data-href="/app.b9f301440aaeaf79cf79.css">html{-ms-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-size:2.25rem}h1,h2{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.45rem}pre{margin:0 0 1.45rem;font-size:.85rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset,table{padding:0;margin:0 0 1.45rem}blockquote{padding:0;margin:0 1.45rem 1.45rem}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;src:local("Ubuntu Regular"),local("Ubuntu-Regular"),url(https://fonts.gstatic.com/s/ubuntu/v12/4iCs6KVjbNBYlgoKcg72nU6AF7xm.woff2) format("woff2");unicode-range:U+0460-052f,U+1c80-1c88,U+20b4,U+2de0-2dff,U+a640-a69f,U+fe2e-fe2f}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;src:local("Ubuntu Regular"),local("Ubuntu-Regular"),url(https://fonts.gstatic.com/s/ubuntu/v12/4iCs6KVjbNBYlgoKew72nU6AF7xm.woff2) format("woff2");unicode-range:U+0400-045f,U+0490-0491,U+04b0-04b1,U+2116}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;src:local("Ubuntu Regular"),local("Ubuntu-Regular"),url(https://fonts.gstatic.com/s/ubuntu/v12/4iCs6KVjbNBYlgoKcw72nU6AF7xm.woff2) format("woff2");unicode-range:U+1f??}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;src:local("Ubuntu Regular"),local("Ubuntu-Regular"),url(https://fonts.gstatic.com/s/ubuntu/v12/4iCs6KVjbNBYlgoKfA72nU6AF7xm.woff2) format("woff2");unicode-range:U+0370-03ff}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;src:local("Ubuntu Regular"),local("Ubuntu-Regular"),url(https://fonts.gstatic.com/s/ubuntu/v12/4iCs6KVjbNBYlgoKcQ72nU6AF7xm.woff2) format("woff2");unicode-range:U+0100-024f,U+0259,U+1e??,U+2020,U+20a0-20ab,U+20ad-20cf,U+2113,U+2c60-2c7f,U+a720-a7ff}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;src:local("Ubuntu Regular"),local("Ubuntu-Regular"),url(https://fonts.gstatic.com/s/ubuntu/v12/4iCs6KVjbNBYlgoKfw72nU6AFw.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;src:local("Ubuntu Bold"),local("Ubuntu-Bold"),url(https://fonts.gstatic.com/s/ubuntu/v12/4iCv6KVjbNBYlgoCxCvjvWyNPYZvg7UI.woff2) format("woff2");unicode-range:U+0460-052f,U+1c80-1c88,U+20b4,U+2de0-2dff,U+a640-a69f,U+fe2e-fe2f}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;src:local("Ubuntu Bold"),local("Ubuntu-Bold"),url(https://fonts.gstatic.com/s/ubuntu/v12/4iCv6KVjbNBYlgoCxCvjtGyNPYZvg7UI.woff2) format("woff2");unicode-range:U+0400-045f,U+0490-0491,U+04b0-04b1,U+2116}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;src:local("Ubuntu Bold"),local("Ubuntu-Bold"),url(https://fonts.gstatic.com/s/ubuntu/v12/4iCv6KVjbNBYlgoCxCvjvGyNPYZvg7UI.woff2) format("woff2");unicode-range:U+1f??}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;src:local("Ubuntu Bold"),local("Ubuntu-Bold"),url(https://fonts.gstatic.com/s/ubuntu/v12/4iCv6KVjbNBYlgoCxCvjs2yNPYZvg7UI.woff2) format("woff2");unicode-range:U+0370-03ff}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;src:local("Ubuntu Bold"),local("Ubuntu-Bold"),url(https://fonts.gstatic.com/s/ubuntu/v12/4iCv6KVjbNBYlgoCxCvjvmyNPYZvg7UI.woff2) format("woff2");unicode-range:U+0100-024f,U+0259,U+1e??,U+2020,U+20a0-20ab,U+20ad-20cf,U+2113,U+2c60-2c7f,U+a720-a7ff}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;src:local("Ubuntu Bold"),local("Ubuntu-Bold"),url(https://fonts.gstatic.com/s/ubuntu/v12/4iCv6KVjbNBYlgoCxCvjsGyNPYZvgw.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}html{font-family:Ubuntu,Helvetica Neue,"sans-serif";font-size:100%;-webkit-text-size-adjust:100%;-webkit-font-variant-ligatures:none;font-variant-ligatures:none;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-shadow:rgba(0,0,0,.01) 0 0 1px;font-size:15px;color:#333;background-color:#fffeff}@media (min-width:769px){html{font-size:17px}}body{font-family:Ubuntu,Helvetica Neue,"sans-serif";font-size:100%;-webkit-text-size-adjust:100%;-webkit-font-variant-ligatures:none;font-variant-ligatures:none;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-shadow:rgba(0,0,0,.01) 0 0 1px;font-size:15px;color:#333;line-height:1.6;background-color:#fffeff}@media (min-width:769px){body{font-size:17px}}a{color:#5badf0;text-decoration:none}div p img{display:block;margin:auto;max-width:75%}</style><meta name="generator" content="Gatsby 2.0.91"/><title data-react-helmet="true">Dinesh Pandiyan | React Hooks - Test custom hooks with Enzyme</title><meta data-react-helmet="true" name="description" content="Dinesh Pandiyan is a Full Stack Engineer with amazing JavaScript skills. He is the author of popular open source projects like Typy, React Socks, React RenderInBrowser, Dev Landing Page and more."/><meta data-react-helmet="true" property="og:title" content="React Hooks - Test custom hooks with Enzyme"/><meta data-react-helmet="true" property="og:description" content="Dinesh Pandiyan is a Full Stack Engineer with amazing JavaScript skills. He is the author of popular open source projects like Typy, React Socks, React RenderInBrowser, Dev Landing Page and more."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@flexdinesh"/><meta data-react-helmet="true" name="twitter:title" content="React Hooks - Test custom hooks with Enzyme"/><meta data-react-helmet="true" name="twitter:description" content="Dinesh Pandiyan is a Full Stack Engineer with amazing JavaScript skills. He is the author of popular open source projects like Typy, React Socks, React RenderInBrowser, Dev Landing Page and more."/><meta data-react-helmet="true" name="og:image" content="/static/7d54fca2b81ed369dfb3932162564996/ec080/dp.jpg"/><meta data-react-helmet="true" name="google-site-verification" content="lpiCbxqS9teGY6OaEiSz8PQFGmf52vwkQGss2PufUGI"/><link rel="shortcut icon" href="/icons/icon-48x48.png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#5badf0"/><link as="script" rel="preload" href="/webpack-runtime-f0ea4843522c67d90e2c.js"/><link as="script" rel="preload" href="/app-818b13a09e80f486820d.js"/><link as="script" rel="preload" href="/0-8860e084bce70a42c708.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-629c23ab021a926aec75.js"/><link as="fetch" rel="preload" href="/static/d/184/path---test-custom-react-hooks-with-enzyme-572-d2e-zOmzhqDcAd4pc08QI2Fn1GK4h4.json" crossOrigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div class="Layout-module--page-wrapper--2LN4h"><header class="Header-module--header--2gV_n"><div class="Header-module--menu--2Suuy"><div class="Header-module--menu-item--1Qfhj"><a href="/">Home</a></div><div class="Header-module--menu-item--1Qfhj"><a href="/about/">About</a></div></div></header><div class="Layout-module--content-container--2LGnA"><h1 class="blog-post-module--title--17231">React Hooks - Test custom hooks with Enzyme</h1><div class="blog-post-module--date--_pArM">March 23, 2019</div><div class="blog-post-module--content--2dQ8S"><p><strong>TL;DR</strong> - Wrap your custom hook in a component and shallow render it to test implementation details.</p>
<h1>What you will learn</h1>
<ul>
<li>
<p>React test strategies</p>
<ul>
<li><strong>user observable behaviour</strong></li>
<li><strong>implementation details</strong></li>
</ul>
</li>
<li>Testing custom hooks with Enzyme</li>
</ul>
<h2>Test Strategies</h2>
<p>There are broadly two strategies to test our React codebase.</p>
<ol>
<li>Testing user observable behaviour</li>
<li>Testing implementation details</li>
</ol>
<h3>Testing user observable behaviour</h3>
<p>Testing user observable behaviour means writing tests against components that test</p>
<ul>
<li>how the component is rendered</li>
<li>how the component is re-rendered when user interacts with the DOM</li>
<li>how props/state control what is rendered</li>
</ul>
<p>Consider the following component - <code>Greet</code></p>
<pre><code class="language-jsx">function Greet({ user = 'User' }) {
  const [name, setName] = React.useState(user);

  return &#x3C;div onClick={() => setName('Pinocchio')}>Hello, {name}!&#x3C;/div>;
}
</code></pre>
<p>Testing the user observable behaviour in <code>Greet</code> would mean</p>
<ul>
<li>test if <code>Greet</code> is rendered without crashing</li>
<li>test if <code>Hello, User!</code> is rendered when user prop is not passed</li>
<li>test if <code>Hello, Bruce!</code> is rendered when <code>Bruce</code> is passed as value to <code>user</code> prop</li>
<li>test if the text changes to <code>Hello, Pinocchio!</code> when the user clicks on the element</li>
</ul>
<h3>Testing implementation details</h3>
<p>Testing implementation details means writing tests against state logic that test</p>
<ul>
<li>how the state is initialized with default/prop values</li>
<li>how the state changes when handlers are invoked</li>
</ul>
<p>Consider the same component - <code>Greet</code></p>
<pre><code class="language-jsx">function Greet({ user = 'User' }) {
  const [name, setName] = React.useState(user);

  return &#x3C;div onClick={() => setName('Pinocchio')}>Hello, {name}!&#x3C;/div>;
}
</code></pre>
<p>Testing implementation details in <code>Greet</code> would mean</p>
<ul>
<li>test if <code>name</code> is set to default value <code>User</code> when user prop is not passed to <code>Greet</code></li>
<li>test if <code>name</code> is set to prop value when user prop is passed to <code>Greet</code></li>
<li>test if <code>name</code> is updated when <code>setName</code> is invoked</li>
</ul>
<h2>Testing custom hooks with Enzyme</h2>
<p><em>Note: Please make sure your React version is <code>^16.8.5</code>. Hooks won't re-render components with enzyme shallow render in previous versions and the React team fixed it in this release. If your React version is below that, you might have to use enzyme mount and <code>.update()</code> your wrapper after each change to test the re-render.</em></p>
<p>Testing implementation details might seem unnecessary and might even be considered as a bad practice when you are writing tests against components that contains presentational (UI) logic and render elements to the DOM. But <strong>custom hooks</strong> contain only <strong>state logic</strong> and it is imperative that we test the implementation details thoroughly so we know exactly how our custom hook will behave within a component.</p>
<p>Let's write a custom hook to update and validate a form field.</p>
<pre><code class="language-js">/* useFormField.js */

import React from 'react';

function useFormField(initialVal = '') {
  const [val, setVal] = React.useState(initialVal);
  const [isValid, setValid] = React.useState(true);

  function onChange(e) {
    setVal(e.target.value);

    if (!e.target.value) {
      setValid(false);
    } else if (!isValid) setValid(true);
  }

  return [val, onChange, isValid];
}

export default useFormField;
</code></pre>
<p><strong>As great as custom hooks are in abstracting away re-usable logic in our code, they do have one limitation. Even though they are just JavaScript functions they will work only inside React components. You cannot just invoke them and write tests against what a hook returns. You have to wrap them inside a React component and test the values that it returns.</strong></p>
<ul>
<li>custom hooks cannot be tested like JavaScript functions</li>
<li>custom hooks should be wrapped inside a React component to test its behaviour</li>
</ul>
<p>Thanks to the composibility of hooks, we could pass a hook as a prop to a component and everything will work exactly as how it's supposed to work. We can write a wrapper component to render and test our hook.</p>
<pre><code class="language-jsx">/* useFormField.test.js */

function HookWrapper(props) {
  const hook = props.hook ? props.hook() : undefined;
  return &#x3C;div hook={hook} />;
}
</code></pre>
<p>Now we can access the hook like a JavaScript object and test its behaviour.</p>
<pre><code class="language-jsx">/* useFormField.test.js */

import React from 'react';
import { shallow } from 'enzyme';
import useFormField from './useFormField';

function HookWrapper(props) {
  const hook = props.hook ? props.hook() : undefined;
  return &#x3C;div hook={hook} />;
}

it('should set init value', () => {
  let wrapper = shallow(&#x3C;HookWrapper hook={() => useFormField('')} />);

  let { hook } = wrapper.find('div').props();
  let [val, onChange, isValid] = hook;
  expect(val).toEqual('');

  wrapper = shallow(&#x3C;HookWrapper hook={() => useFormField('marco')} />);

  // destructuring objects - {} should be inside brackets - () to avoid syntax error
  ({ hook } = wrapper.find('div').props());
  [val, onChange, isValid] = hook;
  expect(val).toEqual('marco');
});
</code></pre>
<p>The full test suite for <code>useFormField</code> custom hook will look like this.</p>
<pre><code class="language-jsx">/* useFormField.test.js */

import React from 'react';
import { shallow } from 'enzyme';
import useFormField from './useFormField';

function HookWrapper(props) {
  const hook = props.hook ? props.hook() : undefined;
  return &#x3C;div hook={hook} />;
}

describe('useFormField', () => {
  it('should render', () => {
    let wrapper = shallow(&#x3C;HookWrapper />);

    expect(wrapper.exists()).toBeTruthy();
  });

  it('should set init value', () => {
    let wrapper = shallow(&#x3C;HookWrapper hook={() => useFormField('')} />);

    let { hook } = wrapper.find('div').props();
    let [val, onChange, isValid] = hook;
    expect(val).toEqual('');

    wrapper = shallow(&#x3C;HookWrapper hook={() => useFormField('marco')} />);

    // destructuring objects - {} should be inside brackets - () to avoid syntax error
    ({ hook } = wrapper.find('div').props());
    [val, onChange, isValid] = hook;
    expect(val).toEqual('marco');
  });

  it('should set the right val value', () => {
    let wrapper = shallow(&#x3C;HookWrapper hook={() => useFormField('marco')} />);

    let { hook } = wrapper.find('div').props();
    let [val, onChange, isValid] = hook;
    expect(val).toEqual('marco');

    onChange({ target: { value: 'polo' } });

    ({ hook } = wrapper.find('div').props());
    [val, onChange, isValid] = hook;
    expect(val).toEqual('polo');
  });

  it('should set the right isValid value', () => {
    let wrapper = shallow(&#x3C;HookWrapper hook={() => useFormField('marco')} />);

    let { hook } = wrapper.find('div').props();
    let [val, onChange, isValid] = hook;
    expect(val).toEqual('marco');
    expect(isValid).toEqual(true);

    onChange({ target: { value: 'polo' } });

    ({ hook } = wrapper.find('div').props());
    [val, onChange, isValid] = hook;
    expect(val).toEqual('polo');
    expect(isValid).toEqual(true);

    onChange({ target: { value: '' } });

    ({ hook } = wrapper.find('div').props());
    [val, onChange, isValid] = hook;
    expect(val).toEqual('');
    expect(isValid).toEqual(false);
  });
});
</code></pre>
<p>Rendering the custom hook and accessing it as a prop should give us full access to its return values.</p>
<p>If you're using <code>useEffect</code> hook in your custom hook, make sure you wrap the <code>shallow</code> or <code>mount</code> call with <a href="https://reactjs.org/docs/test-utils.html#act">ReactTestUtils.act()</a> to have the effects flushed out before assertions. Enzyme might support this internally soon but for now, this is required. More info on this here - <a href="https://reactjs.org/docs/hooks-faq.html#how-to-test-components-that-use-hooks">hooks-faq</a>.</p>
<pre><code class="language-js">act(() => {
  wrapper = shallow(&#x3C;HookWrapper />);
});
</code></pre>
<p>All code snippets in this post can be found in the repo - <a href="https://github.com/flexdinesh/testing-hooks">testing-hooks</a> with a working example.</p>
<p>Happy testing! ðŸŽ‰</p></div></div><footer class="Footer-module--footer--VUGIP"><div><span>Â© Copyright 2019 </span><a href="https://twitter.com/flexdinesh" target="blank">Dinesh Pandiyan</a></div></footer></div></div></div><script>
  
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-115359405-1',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(!(navigator.doNotTrack == "1" || window.doNotTrack == "1")) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-115359405-1', 'auto', {});
      ga('set', 'anonymizeIp', true);
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"test-custom-react-hooks-with-enzyme-572","path":"/test-custom-react-hooks-with-enzyme/"};window.dataPath="184/path---test-custom-react-hooks-with-enzyme-572-d2e-zOmzhqDcAd4pc08QI2Fn1GK4h4";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app.b9f301440aaeaf79cf79.css","/app-818b13a09e80f486820d.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js.2347c38af682bed3706c.css","/component---src-templates-blog-post-js-629c23ab021a926aec75.js"],"component---src-pages-404-js":["/component---src-pages-404-js.210f901c31124a31314c.css","/component---src-pages-404-js-2e84bfa288ffba84d42b.js"],"component---src-pages-about-js":["/component---src-pages-about-js.210f901c31124a31314c.css","/component---src-pages-about-js-6b5fe187b9c1cc709240.js"],"component---src-pages-index-js":["/component---src-pages-index-js.d62441ebe88c30c93937.css","/component---src-pages-index-js-0ae229cb0ca585402951.js"],"pages-manifest":["/pages-manifest-a194058ad5489f0e67da.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-js-629c23ab021a926aec75.js" async=""></script><script src="/0-8860e084bce70a42c708.js" async=""></script><script src="/app-818b13a09e80f486820d.js" async=""></script><script src="/webpack-runtime-f0ea4843522c67d90e2c.js" async=""></script></body></html>